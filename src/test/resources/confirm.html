<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>入力内容確認ページ</title>
</head>
<body>
<h1>入力内容の確認</h1>
<p>以下の内容でよろしいですか？</p>

<div id="confirmation-details">
</div>

<button onclick="window.history.back()">修正に戻る</button>
<button onclick="alert('送信を完了しました！')">送信する</button>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const params = new URLSearchParams(window.location.search);
        const detailsDiv = document.getElementById('confirmation-details');

        // --- 新しく追加・修正する部分 ---
        // valueと表示テキストのマッピング
        const interestLabels = {
            'politics': '政治とタイミング',
            'strategy': '戦略と勢い',
            'culture': '文化と歴史'
        };

        const genderLabels = {
            'male': '男性',
            'female': '女性'
        };
        // --- 修正終わり ---


        let htmlContent = '<ul>';

        // 名前 (firstName)
        if (params.has('firstName')) {
            htmlContent += `<li><strong>名前:</strong> ${params.get('firstName')}</li>`;
        }

        // 性別 (gender)
        if (params.has('gender')) {
            const genderValue = params.get('gender');
            // --- 修正: マッピングを使って表示テキストを取得 ---
            htmlContent += `<li><strong>性別:</strong> ${genderLabels[genderValue] || genderValue}</li>`;
        }

        // 興味のあること (interests) ※複数選択の場合を考慮
        if (params.has('interests')) {
            const interestsValues = params.getAll('interests'); // getAllで複数の値を配列として取得
            // --- 修正: 各valueに対応するラベルテキストに変換 ---
            const displayInterests = interestsValues.map(value => interestLabels[value] || value);
            htmlContent += `<li><strong>興味のあること:</strong> ${displayInterests.join(', ')}</li>`;
        }

        // ファイル名 (image) - ファイルアップロードはGET送信ではファイル名しか渡せません
        if (params.has('image')) {
            const fullPath = params.get('image');
            const fileName = fullPath.split(/(\\|\/)/g).pop();
            htmlContent += `<li><strong>アップロードファイル:</strong> ${fileName}</li>`;
        }

        // 好きなモビルスーツ (favoriteMS)
        if (params.has('favoriteMS')) {
            // ドロップダウンリストのvalueと表示テキストは通常同じか、valueは内部的なIDで表示テキストが意味を持つことが多い
            // 今回はシンプルにvalueをそのまま表示
            htmlContent += `<li><strong>好きなモビルスーツ:</strong> ${params.get('favoriteMS')}</li>`;
        }

        htmlContent += '</ul>';
        detailsDiv.innerHTML = htmlContent;
    });
</script>
</body>
</html>