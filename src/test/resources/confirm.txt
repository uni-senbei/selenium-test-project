<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>入力内容確認ページ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        div { margin-bottom: 15px; }
        p { margin: 5px 0; }
        .details-box {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            max-width: 500px;
            margin: auto;
        }
        h1 { text-align: center; }
        .back-button {
            display: block;
            width: 100px;
            padding: 10px;
            margin: 20px auto;
            background-color: #007bff;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
        }
        .back-button:hover {
            background-color: #0056b3;
        }
    </style>
    <script src="./surveyData.js"></script>
</head>
<body>
    <h1>入力内容確認</h1>
    <div id="confirmation-details" class="details-box">
        <p>名前: <span id="display-firstName"></span></p>
        <p>性別: <span id="display-gender"></span></p>
        <p>興味のあること: <span id="display-interests"></span></p>
        <p>アップロードファイル: <span id="display-image"></span></p>
        <p>好きなモビルスーツ: <span id="display-favoriteMS"></span></p>
    </div>
    <a href="input.html" class="back-button">戻る</a>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);

            // ヘルパー関数: value に対応する label を surveyData から検索
            function getLabelByValue(dataArray, valueToFind) {
                const foundItem = dataArray.find(item => item.value === valueToFind);
                return foundItem ? foundItem.label : valueToFind; // 見つからなければvalueをそのまま返す
            }

            // 名前
            const firstName = params.get('firstName');
            document.getElementById('display-firstName').textContent = firstName || '未入力';

            // 性別
            const genderValue = params.get('gender');
            const genderLabel = getLabelByValue(surveyData.gender, genderValue);
            document.getElementById('display-gender').textContent = genderLabel || '未選択';

            // 興味のあること
            const interestValues = params.getAll('interests'); // 複数の値を取得
            let interestsLabels = [];
            if (interestValues.length > 0) {
                interestsLabels = interestValues.map(value => getLabelByValue(surveyData.interests, value));
            }
            document.getElementById('display-interests').textContent = interestsLabels.join(', ') || '未選択';

            // アップロードファイル名
            const imageName = params.get('image');
            // C:\fakepath\ を除去してファイル名のみを取得
            const fileNameOnly = imageName ? imageName.split('\\').pop().split('/').pop() : 'ファイルなし';
            document.getElementById('display-image').textContent = fileNameOnly;

            // 好きなモビルスーツ
            const favoriteMSValue = params.get('favoriteMS');
            const favoriteMSLabel = getLabelByValue(surveyData.favoriteMS, favoriteMSValue);
            document.getElementById('display-favoriteMS').textContent = favoriteMSLabel || '未選択';

            console.log("confirm.htmlが読み込まれました。");
        });
    </script>
</body>
</html>