# AIチーム協業 運用マニュアル (v1.5) 

目的 本マニュアルは、AI（ME, SC-D, SC-I, RV-G, RV-C, GH, CM）との協業において、過去の教訓を活かし、「認識のズレ」によるエラーや手戻りを最小限に抑え、効率的かつ高品質な開発を実現するための運用指針を定める。特に、AIの特性を踏まえたリスクマネジメントとコミュニケーションの最適化に焦点を当てる。
## 各フェーズにおける運用ルールと担当
## 1. プロジェクト開始・計画フェーズ 
いつ: プロジェクト開始時、または新規タスク着手前 
だれが: ME、CM 
何を:
- プロジェクト全体の**「大義」（目的・品質目標・テスト戦略）**を明確にする。
- 新規追加または大幅に改修されるコードに対する単体テストコードの作成を必須とすること。
- AIチーム制の各AIの役割と期待値、特に分業制を導入したSC-DとSC-Iの役割を再確認する。
- このフェーズで、タスク全体のテスト戦略を策定する（どのテストレベルを実施するか、品質目標、責任範囲など）。 
どのように:
- MEが、プロジェクトの背景、最終的な品質目標、優先順位といった戦略的情報をAI全体に共有する。
- CMが、JSTQB ALTMの観点からプロセス改善の視点を提供する。
- CMは、タスクがどのJSTQB ALTM学習目標に直接関連するかを定義し、MEと共有する。 
どうする: AIが単なるタスク実行者ではなく、プロジェクトの目標を理解した上で最適な判断ができる基盤を築く。
## 2. 詳細設計フェーズ 
いつ: コーディング着手前 
だれが: ME、SC-D 
何を:
- 具体的な変更内容を記述した詳細設計書を作成。
- SC-Dは、SC-Iに誤って変更されないよう、明確な制約を指示する。
- 新規に追加されるファイルや大規模に改修されるコンポーネントについては、その単体テストコードの設計方針を明確にする。
- 設計段階で、コンポーネントの**「テスト容易性（Testability）」**を考慮し、テストしやすい構造になっているかを確認する。 
どのように:
- 詳細設計書に以下のセクションを必ず追加する。
- 【AIへの指示】: 「指示された変更点以外にも変更が必要とSC-Dが判断した場合は、具体的な変更点の詳細を明記してMEに『質問返し』してください。その中で変更NG箇所がある場合は、MEが【NO_TOUCHリスト】（変更禁止領域の具体的リスト）を作成し、変更NG箇所を明確にします。なお上記で明記しなかった箇所には一切変更を加えないでください。また、新規追加または大規模に改修されるコンポーネントについては、その単体テストの実施方法、テストケースの概要、テストデータに関する考察を詳細設計に含めてください。」と明記する。
- 【変更の粒度指示】: 「デフォルトでは小刻みな変更を原則とする。密結合で小刻みな変更が困難で一括改修が必要と判断される場合は、SC-DからMEに事前に相談を返してください。」と明記。
- 【変更インパクト予測】: 「この詳細設計に基づくと、既存コードのどの部分が、どの程度の規模で変更される可能性があるかを予測し、設計書に追記してください。」とSC-Dに指示する。 
- どうする: SC-Dへの指示を極めて明確にし、意図しない変更のリスクを設計段階で最小化する。MEは変更インパクトを事前に把握し、設計の妥当性を評価する。
## 3. 詳細設計レビューフェーズ 
いつ: 詳細設計書完成後、コーディング着手前 
だれが: ME、RV-G、RV-C、SC-I 
何を:
- 詳細設計書の妥当性、特にSC-Dへの指示の明確性と網羅性をレビュー。
- SC-Dの変更インパクト予測を確認。
- SC-Iは、実装者視点から、設計が技術的に可能か、既存コードと乖離がないかなどをレビューする。 
どのように:
- RV-G、RV-C、SC-Iは、設計書の内容だけでなく、**「AIが誤解釈する可能性のある箇所」「既存コードとの整合性」**の視点も加えてレビューする。
- 【AIによる質問返し】: レビュアーAIは、設計に不明点や疑義がある場合、また「AIへの指示」関連の懸念がある場合、能動的にMEに確認を返す。
- 【MEによる重点レビュー】: MEは、詳細設計の以下の点を特に注視してレビューする。
- 「AIへの指示」の内容と、その網羅性、不変性指示の明確性。
- SC-Dの「変更インパクト予測」の妥当性。
- AIからの質問返しに対するMEの判断基準と承認プロセスを確立する。 
どうする: 設計段階で潜在的な「認識のズレ」を洗い出し、後の手戻りを予防する。
## 4. コード生成・コードレビューフェーズ 
いつ: 詳細設計承認後 
だれが: SC-I（生成）、ME、RV-G、RV-C 
何を:
- 設計に基づいたコード生成。
- 生成されたコードの品質と、既存コードとの整合性レビュー。 
- どのように:
- 【SC-Iによるコード生成】: SC-Iは、詳細設計の指示（特に「変更しない領域」）を厳守してコードを生成する。
- 【SC-Dによる最終レビュー】: SC-Dは、SC-Iが生成したコードが、自身の作成した詳細設計の意図を正しく反映しているかを確認する。
- 【AIレビュアーによる評価】: RV-G、RV-Cは、コードの機能要件達成度、品質に加え、**「既存コードとの適合性」「変更の影響範囲」**を重視してレビューする。
- もしRV-G、RV-Cが**「簡潔化」「リファクタリング」を過度に「絶賛」した場合は、そのレビュー結果に「破壊的変更リスクあり」の警告フラグ**を付与し、MEへの報告を必須とする。
- 【MEによる最終差分チェック】】: MEは、SC-Iが生成したコードの差分（diff）を必ず厳密に確認する。
- 【推奨（学習プランで検討・導入）】静的解析ツールの活用: CMからの学習プランに基づき、LinterやSonarQubeなどの静的解析ツールを導入し、SC-Iが生成したコードの初期品質を自動的にチェックし、MEのレビュー負荷を軽減する。 
どうする: コードの品質を確保し、AIによる意図しない変更を最終段階で検知・修正する。
## 5. テスト・トラブルシューティングフェーズ 
いつ: コードレビュー承認後 
だれが: ME、SC-I、RV-G、RV-C 
何を: コードの機能テスト、バグ修正。 
どのように:
- 【エラー連発時の迅速な対応】: テスト実行中にエラーが連鎖的に発生し、根本原因の特定に時間を要すると判断した場合、速やかに安定版へのロールバックを優先する。
- 【エラー発生時の詳細対応フロー】:
- 初期検知とSC-Iへの相談（ME→SC-I）: MEはエラーを検知したら、まずSC-Iに状況を報告し、SC-IはMEにエラー内容の提供などの協力を仰ぎながらMEと共に根本原因を調査する。
- 修正方針の提案（SC-I→ME）: SC-IはMEと共に調査した根本原因に基づき、複数の修正方針を提示する。
- 修正方針のレビューと選択、中断条件の明確化（ME、RV-G、RV-C→SC-I）: MEはSC-Iから提示された修正方針をレビューし、最適な方針を選択する。
- 具体的な修正案の提案（SC-I→ME）: 選択された修正方針に基づき、SC-Iが具体的なコード修正案をMEに提示する。
- 具体的な修正案のレビュー（ME、RV-G、RV-C）: MEはSC-Iから提示された具体的な修正案をレビューし、品質、正確- 性、副作用の有無を確認する。RV-G、RV-Cもこの具体的な修正案のレビューに参加する。
- 修正の実行（SC-I）: レビュー承認された修正案をSC-Iが実行する。 
どうする: プロジェクトの停滞を防ぎ、リスクとコストの増大を抑制しつつ、効率的に問題解決を図る。
## 6. 継続的改善フェーズ 
いつ: 各タスク完了後、または定期的 
だれが: ME、CM 
何を:
- 各フェーズの運用実績を振り返り、課題と改善点を特定する。
- 本マニュアルのルールを適宜見直し、更新する。
- タスク完了報告時には、改善策を導入した場合、運用マニュアル導入前後の効果を定量的に比較して報告する。 
どのように:
- 定期的にMEが実施する**「振り返り（レトロスペクティブ）」**で、CMがJSTQB ALTMの観点からプロセスやツールの有効性を評価する。
- 【AIからの自律報告】: タスク終了後に、MEが実施する振り返りで「タスク完了報告をお願いします」と促したら、各AIは自律的に結果を報告する。
- このマニュアルを「生きているドキュメント」として、常に見直し、最適化を図る。 
どうする: AIとの協業プロセスそのものを継続的に改善し、将来的なプロジェクトの効率と品質を向上させる。
